document.addEventListener("DOMContentLoaded", function() {
  // Hàm lấy tham số URL theo tên
  function getUrlParam(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  }

  // Lấy tham số từ URL, không có thì để rỗng
  const barcodeData = getUrlParam("barcode") || "";
  const qrData = getUrlParam("qr") || "";
  const nguoiGui = getUrlParam("guitai") || "";
  const nguoiNhan = getUrlParam("nguoinhan") || "";
  const sdtNhan = getUrlParam("sdt") || "";
  const diaChiNhan = getUrlParam("diachi") || "";

  // Gán nội dung vào các phần tử trong page
  document.getElementById("maVanDon").textContent = barcodeData;
  document.getElementById("nguoiGui").textContent = nguoiGui;
  document.getElementById("nguoiNhan").textContent = nguoiNhan;
  document.getElementById("sdtNhan").textContent = sdtNhan;
  document.getElementById("diaChiNhan").textContent = diaChiNhan;

  // Gán hình barcode
  if(barcodeData) {
    document.getElementById("barcodeImg").src = `https://barcode.tec-it.com/barcode.ashx?data=${encodeURIComponent(barcodeData)}&code=EAN13&dpi=96`;
  } else {
    document.getElementById("barcodeImg").alt = "Chưa có mã vận đơn";
  }

  // Gán hình QR code
  if(qrData) {
    document.getElementById("qrCodeImg").src = `https://chart.googleapis.com/chart?cht=qr&chs=100x100&chl=${encodeURIComponent(qrData)}`;
  } else {
    document.getElementById("qrCodeImg").alt = "Chưa có QR code";
  }
});
